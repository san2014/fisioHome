{"version":3,"sources":["../../src/pages/proposta-init/proposta-init.module.ts","../../src/providers/proposta/proposta.provider.ts","../../src/pages/proposta-init/proposta-init.ts","../../src/model/proposta-model.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PropostaInitPage } from './proposta-init';\n\nimport { PropostaProvider } from './../../providers/proposta/proposta.provider';\n\n@NgModule({\n  declarations: [\n    PropostaInitPage,\n    \n  ],\n  entryComponents: [],\n  imports: [\n    IonicPageModule.forChild(PropostaInitPage)\n  ],\n  providers:[\n    PropostaProvider\n  ]\n})\nexport class PropostaInitPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/proposta-init/proposta-init.module.ts","import { Injectable } from '@angular/core';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\n\nimport { TipoAtendimentoModel } from './../../model/tipoatendimento-model';\n\n@Injectable()\nexport class PropostaProvider {\n\n  constructor(public http: Http) {}\n\n  findProfDisponiveis(tipo: TipoAtendimentoModel): Promise<any>{\n\n\n    let list =[\n      {\n        \"usuario\": {\n          \"id\": \"3\",\n          \"nome\": \"Luana Costa\"\n        },\n        \"credenciamento\": \"11234-CFTO\",\n        \"vencimento\": \"18/08/2018\",\n        \"conta\": \"3456678\",\n        \"agencia\": \"3467\",\n        \"banco\": \"Caixa Economica Federal\",\n        \"flagDisponivel\": \"1\",  \n        \"especialidades\" : [\n          {\"id\": \"2\", \"descricao\" :\"Pediatria\"},\n          {\"id\": \"3\", \"descricao\" :\"Neurologia\"}\n        ]\n      }\n    ];\n    \n    return new Promise(resolve => {\n      resolve(list);\n    });\n    \n/*     return new Promise(resolve => {\n\n      this.http.get(`${ENDPOINT_API}/profissionais`, \n        {params: {flagDisponivel: 1}})\n        .map(res => res.json())\n        .subscribe(data => {\n\n          data.forEach(work => {\n            work.especialidades.forEach(spec => {\n              if (spec.id !== tipo.id){\n                resolve(data);\n              }                 \n            });\n          });\n\n          resolve(null);\n          \n        }, err => resolve(null));\n\n    }); */\n        \n  }  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/proposta/proposta.provider.ts","import { FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport { TipoAtendimentoModel } from './../../model/tipoatendimento-model';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController,\n         ToastController, ModalController } from 'ionic-angular';\n\nimport { PropostaModel } from \"../../model/proposta-model\";\nimport { PropostaProvider } from './../../providers/proposta/proposta.provider';\n\n@IonicPage()\n@Component({\n  selector: 'page-proposta-init',\n  templateUrl: 'proposta-init.html',\n})\nexport class PropostaInitPage {\n\n  tipoAtendimento: TipoAtendimentoModel;\n\n  proposta: PropostaModel;\n\n  formProposta: FormGroup;\n\n  constructor(\n    public navCtrl: NavController, \n    private fb: FormBuilder,\n    private alertCtrl: AlertController,\n    private toastCtrl: ToastController,\n    private propostaProvider: PropostaProvider,\n    public modalCtrl: ModalController,\n    public navParams: NavParams\n  ){\n\n    this.initialize();\n    \n  }\n\n  initialize(){\n    this.tipoAtendimento = this.navParams.get('tipoAtendimento');\n    \n    this.formProposta = this.fb.group({\n      'qtd': ['', Validators.compose\n        (\n          [\n            Validators.required, \n            Validators.maxLength(3)\n          ]\n        )\n      ],\n      'dtInicio': ['', Validators.required]\n    });\n\n    this.proposta = new PropostaModel();\n    this.proposta.tipoAtendimento = this.tipoAtendimento;\n  }\n\n  presentToast(msg: string) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'middle'\n    });\n  \n    toast.onDidDismiss(() => {});\n  \n    toast.present();\n  }   \n\n  aplicaCssErro(campo: string) {\n    return {\n      'box-register-error': this.hasError(campo),\n      'box-register': this.hasSuccess(campo) || this.notUsed(campo)\n    };\n  }   \n\n  notUsed(campo){\n    return this.formProposta.get(campo).pristine;\n  }  \n\n  hasSuccess(campo): boolean{\n    return this.formProposta.get(campo).valid;\n  }  \n  \n  hasError(campo): boolean{\n    return (\n      !this.formProposta.get(campo).valid &&\n      (this.formProposta.get(campo).touched || this.formProposta.get(campo).dirty)\n    );\n  }  \n\n  request(){\n    let alert = this.alertCtrl.create({\n      title: 'Pesquisando',\n      message: `requisitando profissional para ${this.proposta.qtd} atendimentos...`,\n      buttons: [\n        {\n          text: 'Cancelar',\n          handler: () => {\n            this.presentToast('Busca cancelada...');\n          }          \n        }\n      ]\n    });\n\n    alert.present(); \n    \n    this.findProfDisponiveis(alert);\n  }\n\n  findProfDisponiveis(alert){\n    this.propostaProvider.findProfDisponiveis(this.tipoAtendimento)\n      .then((data) => {\n        this.proposta.profissional = data[0];\n        alert.dismiss();\n        this.showProfModal()\n      });\n  }\n\n  showProfModal() {\n    let profileModal = this.modalCtrl\n      .create('PropostaSendPage', {'proposta': this.proposta});\n    \n    profileModal.present();\n  }  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/proposta-init/proposta-init.ts","import { ProfissionalModel } from './profissional-model';\nimport { ClienteModel } from './cliente-model';\nimport { TipoAtendimentoModel } from './tipoatendimento-model';\n\nexport class PropostaModel{\n\n    id: number;\n\n    tipoAtendimento: TipoAtendimentoModel;\n\n    cliente: ClienteModel;\n\n    profissional: ProfissionalModel;\n\n    dataInicio: Date;\n\n    qtd: number;\n\n    avaliacaoCliente: string;\n\n    avaliacaoProfissional: string;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/proposta-model.ts"],"sourceRoot":""}